<!DOCTYPE html>
<html lang="en">
<head>
    <title>Quiz App</title>
    <script>
        let sessionId;

        async function startSession() {
            const response = await fetch('/quiz/start', { method: 'POST' });
            const result = await response.text();
            sessionId = result.split("Session ID: ")[1];
            alert("Session started: " + sessionId);
        }

        async function fetchQuestion() {
            const response = await fetch(`/quiz/question/${sessionId}`);
            const question = await response.json();
            console.log(question);
            document.getElementById("question").innerText = question.questionText;
        }

        async function submitAnswer() {
            const questionId = 1; // Replace with dynamic question ID
            const chosenOption = document.getElementById("answer").value;

            const response = await fetch(`/quiz/submit/${sessionId}?questionId=${questionId}&chosenOption=${chosenOption}`, {
                method: 'POST'
            });
            const result = await response.text();
            alert(result);
        }

        async function getSummary() {
            const response = await fetch(`/quiz/summary/${sessionId}`);
            const summary = await response.json();
            console.log(summary);
            document.getElementById("summary").innerText = JSON.stringify(summary, null, 2);
        }
    </script>
</head>
<body>
    <h1>Quiz App</h1>
    <button onclick="startSession()">Start Quiz</button>
    <button onclick="fetchQuestion()">Fetch Question</button>
    <p id="question"></p>

    <input type="text" id="answer" placeholder="Your Answer" />
    <button onclick="submitAnswer()">Submit Answer</button>

    <h2>Summary</h2>
    <button onclick="getSummary()">Get Summary</button>
    <pre id="summary"></pre>
</body>
</html>
